# ChatExcel 功能文档

## 1. 项目概述

| 项目名称 | ChatExcel |
|---------|-----------|
| 技术栈 | React 18 + TypeScript + Vite |
| 定位 | 对话式 Excel/CSV 数据分析工具原型 |

## 2. 页面结构

### 2.1 首页 (HomePage)

**功能描述**: 用户上传数据文件并输入分析需求的入口页面

| 模块 | 说明 |
|-----|------|
| 侧边栏 | 显示 Logo、"快速开始"和"历史任务"导航项 |
| 上传区域 | 支持上传 Excel (.xlsx/.xls) 和 CSV (.csv) 格式文件 |
| 文件标签 | 上传后显示文件名、大小，支持清除 |
| 输入框 | 输入对文件的分析需求（可选填） |
| 发送按钮 | 上传文件后激活，点击进入分析页面 |

**交互流程**:
1. 点击「上传 Excel」或「上传 CSV」按钮选择本地文件
2. 文件上传后显示文件标签（文件名 + 大小）
3. 在输入框中描述分析需求（可选）
4. 点击发送按钮进入生成页

### 2.2 生成页 (GeneratePage)

**功能描述**: 对话式交互界面，展示分析过程和结果

| 模块 | 说明 |
|-----|------|
| 顶部导航 | 面包屑导航（首页 / 文件名）+ 导出按钮 |
| 聊天面板 | 显示用户消息和 AI 助手回复 |
| 输入栏 | 底部固定输入框，支持继续追问 |

**交互流程**:
1. 进入页面后自动显示 AI 初始回复（确认已收到文件和需求）
2. 用户可在底部输入框继续提问
3. 按 Enter 或点击「发送」按钮发送消息
4. 点击「导出结果」可导出分析结果
5. 点击「首页」返回上传页面

## 3. 组件清单

| 组件名 | 路径 | 功能 |
|-------|------|------|
| Sidebar | components/Sidebar.tsx | 左侧导航栏，含 Logo 和菜单项 |
| UploadControls | components/UploadControls.tsx | 文件上传按钮组 |
| FileChip | components/FileChip.tsx | 已上传文件展示标签 |
| TopNav | components/TopNav.tsx | 生成页顶部导航栏 |
| ChatMessageList | components/ChatMessageList.tsx | 聊天消息列表 |
| ChatInput | components/ChatInput.tsx | 底部聊天输入框 |
| ThinkCard | components/ThinkCard.tsx | 思考要点展示卡片（暂未使用） |

## 4. 核心数据流

```
用户上传文件 → HomePage 保存 file 状态
     ↓
输入分析需求 → HomePage 保存 prompt 状态
     ↓
点击发送 → App 接收 file + prompt，切换到 generate 页面
     ↓
GeneratePage 初始化消息列表，显示 AI 初始回复
     ↓
用户追问 → 新消息追加到 messages 状态
```

## 5. 支持的文件格式

| 格式 | 扩展名 |
|-----|--------|
| Excel | .xlsx, .xls |
| CSV | .csv |

## 6. 待实现功能

1. **历史任务** - 侧边栏菜单项，未实现页面跳转
2. **导出结果** - 顶部导航按钮，未实现导出逻辑
3. **AI 分析** - 当前仅有前端 mock 回复，未对接后端 API
4. **ThinkCard 组件** - 已定义但未在页面中使用

